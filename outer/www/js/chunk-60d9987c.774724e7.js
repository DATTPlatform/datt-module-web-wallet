(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60d9987c"],{"0d40":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.transferLoading,expression:"transferLoading"}],staticClass:"bg-gray transfer",attrs:{"element-loading-spinner":"el-icon-loading"}},[s("div",{staticClass:"title"},[e._v(e._s(e.$t("nav.transfer")))]),s("div",{staticClass:"w1200 transfer_info"},[s("el-form",{ref:"transferForm",staticClass:" w630 transfer_form",attrs:{model:e.transferForm,"status-icon":"",rules:e.transferRules}},[s("el-form-item",{attrs:{label:e.$t("transfer.transfer0")}},[s("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.transferForm.fromAddress,callback:function(t){e.$set(e.transferForm,"fromAddress",t)},expression:"transferForm.fromAddress"}})],1),s("div",{staticClass:"fr book"},[s("i",{staticClass:"iconfont iconlianxiren click font16",attrs:{slot:"suffix"},on:{click:e.showBook},slot:"suffix"})]),s("el-form-item",{attrs:{label:e.$t("transfer.transfer1"),prop:"toAddress"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.transferForm.toAddress,callback:function(t){e.$set(e.transferForm,"toAddress","string"===typeof t?t.trim():t)},expression:"transferForm.toAddress"}})],1),s("el-form-item",{attrs:{label:e.$t("transfer.transfer2"),prop:"assetType"}},[s("el-select",{staticClass:"asset_type",on:{change:e.changeType},model:{value:e.transferForm.assetType,callback:function(t){e.$set(e.transferForm,"assetType",t)},expression:"transferForm.assetType"}},e._l(e.assetsList,function(e,t){return s("el-option",{key:t,attrs:{label:e.symbol,value:e}})}),1)],1),s("div",{staticClass:"font12 fr balance"},[e._v(e._s(e.$t("consensus.consensus2"))+"："+e._s(e.assetsInfo.balance)+"\n        "),s("span",[e._v(e._s(e.assetsInfo.symbol))])]),s("el-form-item",{attrs:{label:e.$t("transfer.transfer3"),prop:"amount"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.transferForm.amount,callback:function(t){e.$set(e.transferForm,"amount",t)},expression:"transferForm.amount"}})],1),s("div",{staticClass:"fr click all",on:{click:e.allAvailable}},[e._v(e._s(e.$t("transfer.transfer24")))]),s("el-switch",{directives:[{name:"show",rawName:"v-show",value:1!==e.assetsInfo.type,expression:"assetsInfo.type !==1"}],staticClass:"senior_value fr",attrs:{"inactive-text":e.$t("call.call3"),width:"35"},model:{value:e.seniorValue,callback:function(t){e.seniorValue=t},expression:"seniorValue"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.seniorValue,expression:"seniorValue"}],staticClass:"senior_list cb"},[s("el-form-item",{attrs:{label:"Gas Limit",prop:"gas"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.transferForm.gas,callback:function(t){e.$set(e.transferForm,"gas",t)},expression:"transferForm.gas"}})],1),s("el-form-item",{attrs:{label:"Price",prop:"price"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.transferForm.price,callback:function(t){e.$set(e.transferForm,"price",t)},expression:"transferForm.price"}})],1)],1),s("el-form-item",{staticClass:"remarks",attrs:{label:e.$t("transfer.transfer4")}},[s("el-input",{attrs:{type:"textarea",rows:2,maxlength:"200","show-word-limit":""},model:{value:e.transferForm.remarks,callback:function(t){e.$set(e.transferForm,"remarks",t)},expression:"transferForm.remarks"}})],1),s("div",{staticClass:"font14 mb_20"},[s("el-tooltip",{attrs:{placement:"top"}},[s("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(e.$t("transfer.transfer5")))]),s("i",{staticClass:"el-icon-warning"})]),e._v("\n        "+e._s(e.$t("public.fee"))+": "+e._s(e.transferForm.fee)+"\n        "),s("span",{staticClass:"fCN"},[e._v(e._s(e.defaultInfo.defaultAsset.symbol))])],1),s("el-form-item",{staticClass:"tc"},[s("el-button",{attrs:{type:"success"},on:{click:function(t){return e.submitTransferForm("transferForm")}}},[e._v(e._s(e.$t("public.next")))])],1)],1)],1),s("el-dialog",{staticClass:"book-dialog",attrs:{title:e.$t("public.bookList"),width:"50rem",visible:e.bookDialog,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.bookDialog=t}}},[s("el-table",{attrs:{data:e.bookData}},[s("el-table-column",{attrs:{property:"name",label:e.$t("transfer.transfer4"),width:"100",align:"center"}}),s("el-table-column",{attrs:{property:"address",label:e.$t("tab.tab11"),"min-width":"300",align:"center"}}),s("el-table-column",{attrs:{property:"alias",label:e.$t("address.address3"),width:"100",align:"center"}}),s("el-table-column",{attrs:{label:"",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-link",{staticClass:"click td",attrs:{underline:!1},on:{click:function(s){return e.selectBook(t.row)}}},[e._v(e._s(e.$t("public.choice"))+"\n          ")])]}}])})],1)],1),s("el-dialog",{staticClass:"confirm-dialog",attrs:{title:e.$t("transfer.transfer6"),width:"46rem",visible:e.transferDiolog,"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.transferDiolog=t}}},[s("div",{staticClass:"bg-white"},[s("div",{staticClass:"div-data"},[s("p",[e._v(e._s(e.$t("transfer.transfer0"))+" ")]),s("label",[e._v(e._s(e.transferForm.fromAddress))])]),s("div",{staticClass:"div-data"},[s("p",[e._v(e._s(e.$t("transfer.transfer1"))+" ")]),e.aliasToAddress?s("label",[e._v(e._s(e.aliasToAddress)+"("+e._s(e.transferForm.toAddress)+")")]):s("label",[e._v(e._s(e.transferForm.toAddress))])]),s("div",{staticClass:"div-data"},[s("p",[e._v(e._s(e.$t("public.fee"))+" ")]),s("label",[e._v(e._s(e.transferForm.fee)+" "),s("span",{staticClass:"fCN"},[e._v(e._s(e.defaultInfo.defaultAsset.symbol))])])]),s("div",{staticClass:"div-data cb"},[s("p",[e._v(e._s(e.$t("tab.tab6"))+" ")]),s("label",{staticClass:"yellow"},[e._v(e._s(e.transferForm.amount)+" "),s("span",{staticClass:"fCN"},[e._v(e._s(e.assetsInfo.symbol))])])]),s("div",{staticClass:"div-data remark"},[s("p",[e._v(e._s(e.$t("transfer.transfer4"))+" ")]),s("label",{staticClass:"scroll"},[e._v(e._s(e.transferForm.remarks))])])]),s("div",{staticClass:"dialog-footer cb",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.transferDiolog=!1}}},[e._v(e._s(e.$t("transfer.transfer7")))]),s("el-button",{attrs:{type:"success"},on:{click:e.confirmTransfer}},[e._v(e._s(e.$t("transfer.transfer8")))])],1)]),s("Password",{ref:"password",on:{passwordSubmit:e.passSubmit}})],1)},a=[],n=s("9acd"),o=n["a"],i=(s("3fbe"),s("2877")),c=Object(i["a"])(o,r,a,!1,null,null,null);t["default"]=c.exports},"20d6":function(e,t,s){"use strict";var r=s("5ca1"),a=s("0a49")(6),n="findIndex",o=!0;n in[]&&Array(1)[n](function(){o=!1}),r(r.P+r.F*o,"Array",{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),s("9c6c")(n)},"243f":function(e,t,s){},"3b2b":function(e,t,s){var r=s("7726"),a=s("5dbc"),n=s("86cc").f,o=s("9093").f,i=s("aae3"),c=s("0bfb"),u=r.RegExp,d=u,f=u.prototype,l=/a/g,m=/a/g,h=new u(l)!==l;if(s("9e1e")&&(!h||s("79e5")(function(){return m[s("2b4c")("match")]=!1,u(l)!=l||u(m)==m||"/a/i"!=u(l,"i")}))){u=function(e,t){var s=this instanceof u,r=i(e),n=void 0===t;return!s&&r&&e.constructor===u&&n?e:a(h?new d(r&&!n?e.source:e,t):d((r=e instanceof u)?e.source:e,r&&n?c.call(e):t),s?this:f,u)};for(var p=function(e){e in u||n(u,e,{configurable:!0,get:function(){return d[e]},set:function(t){d[e]=t}})},b=o(d),g=0;b.length>g;)p(b[g++]);f.constructor=u,u.prototype=f,s("2aba")(r,"RegExp",u)}s("7a56")("RegExp")},"3fbe":function(e,t,s){"use strict";var r=s("243f"),a=s.n(r);a.a},"7a56":function(e,t,s){"use strict";var r=s("7726"),a=s("86cc"),n=s("9e1e"),o=s("2b4c")("species");e.exports=function(e){var t=r[e];n&&t&&!t[o]&&a.f(t,o,{configurable:!0,get:function(){return this}})}},"7f7f":function(e,t,s){var r=s("86cc").f,a=Function.prototype,n=/^\s*function ([^ (]*)/,o="name";o in a||s("9e1e")&&r(a,o,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(e){return""}}})},"9acd":function(e,t,s){"use strict";(function(e){s("6b54");var r=s("75fc"),a=(s("ac4d"),s("8a81"),s("ac6a"),s("7f7f"),s("20d6"),s("c5f6"),s("3b2b"),s("96cf"),s("3b8d")),n=s("0ad0"),o=s.n(n),i=s("b8d7"),c=s.n(i),u=s("e065"),d=s.n(u),f=s("1959"),l=s("db49"),m=s("6ace"),h=s("d1f0");t["a"]={data:function(){var e=this,t=function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(s,r,a){var n,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n={},!(r.length>30)){t.next=10;break}if(e.toAddressInfo=o.a.verifyAddress(r),1!==e.toAddressInfo.type){t.next=8;break}return t.next=6,e.verifyToAddress();case 6:i=t.sent,i||(e.toAddressInfo.transferType=0,a(new Error(i.data)));case 8:t.next=13;break;case 10:return t.next=12,e.getAccountByAlias(r);case 12:n=t.sent;case 13:r?r.length<20&&!n.success?(e.toAddressInfo.transferType=0,a(new Error(e.$t("transfer.transfer23")))):(""!==e.transferForm.amount&&e.$refs.transferForm.validateField("amount"),a()):(e.toAddressInfo.transferType=0,a(new Error(e.$t("transfer.transfer9"))));case 14:case"end":return t.stop()}},t)}));return function(e,s,r){return t.apply(this,arguments)}}(),s=function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(s,r,a){var n,i,c,u,d;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=new RegExp("^([1-9][\\d]{0,20}|0)(\\.[\\d]{1,"+e.assetsInfo.decimals+"})?$"),e.available=Number(e.assetsInfo.balance),1===e.assetsInfo.type&&"NULS"===e.assetsInfo.symbol&&(e.available=Number(Object(m["b"])(e.assetsInfo.balance,e.transferForm.fee))),""!==r){t.next=7;break}a(new Error(e.$t("transfer.transfer11"))),t.next=40;break;case 7:if(n.exec(r)){t.next=11;break}a(new Error(e.$t("transfer.transfer12")+": "+e.assetsInfo.decimals)),t.next=40;break;case 11:if(!(r<.001&&"NULS"===e.assetsInfo.symbol)){t.next=15;break}a(new Error(e.$t("transfer.transfer13"))),t.next=40;break;case 15:if(!(r>e.available)){t.next=19;break}a(new Error(e.$t("transfer.transfer131")+": "+e.available)),t.next=40;break;case 19:if(!e.transferForm.toAddress){t.next=39;break}if(i=o.a.verifyAddress(e.transferForm.fromAddress),c=o.a.verifyAddress(e.transferForm.toAddress),i.chainId===c.chainId||2!==e.assetsInfo.type){t.next=35;break}return t.next=25,e.contractInfoByContractAddress(e.assetsInfo.contractAddress);case 25:if(u=t.sent,u.nrc20&&u.crossAsset){t.next=30;break}return e.$message({message:e.$t("tips.tips22"),type:"warning",duration:3e3}),e.transferForm.amount="",t.abrupt("return");case 30:if(d=u.methods.findIndex(function(e){return"transferCrossChain"===e.name}),-1!==d){t.next=35;break}return e.$message({message:e.$t("tips.tips23"),type:"error",duration:3e3}),e.transferForm.amount="",t.abrupt("return");case 35:e.parameterValidation(),a(),t.next=40;break;case 39:e.$refs.transferForm.validateField("toAddress");case 40:case"end":return t.stop()}},t)}));return function(e,s,r){return t.apply(this,arguments)}}(),r=function(t,s,r){s?s<1||s>1e7?r(new Error(e.$t("deploy.deploy81"))):r():r(new Error(e.$t("deploy.deploy8")))},n=function(t,s,r){s?s<1?r(new Error(e.$t("deploy.deploy91"))):r():r(new Error(e.$t("deploy.deploy9")))};return{addressInfo:"",defaultInfo:{},assetsList:"",assetsInfo:{},balanceInfo:{},available:0,contractInfo:{},transferForm:{fromAddress:"",toAddress:"",assetType:"",amount:"",gas:1,price:25,remarks:"",fee:.001},transferRules:{toAddress:[{validator:t,trigger:["blur"]}],amount:[{validator:s,trigger:["blur"]}],gas:[{validator:r,trigger:["blur","change"]}],price:[{validator:n,trigger:["blur","change"]}]},seniorValue:!1,toAddressInfo:{},aliasToAddress:"",contractCallData:{},gasInfo:{number:0,oldNumber:0},contractFee:0,bookDialog:!1,bookData:[],transferDiolog:!1,transferLoading:!1}},created:function(){this.addressInfo=Object(m["e"])(1),this.transferForm.fromAddress=this.addressInfo.address,this.defaultInfo=JSON.parse(sessionStorage.getItem("info"))},mounted:function(){var e=this;this.getCapitalListByAddress(this.addressInfo.address),setInterval(function(){e.addressInfo=Object(m["e"])(1)},500)},watch:{addressInfo:function(e,t){e.address!==t.address&&t.address&&(this.transferForm.fromAddress=this.addressInfo.address,this.getCapitalListByAddress(this.addressInfo.address),this.transferForm.toAddress&&this.$refs.transferForm.validateField("toAddress"))}},components:{Password:h["a"]},methods:{getCapitalListByAddress:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var s,a,n,o,i,c,u,d,f,h,p,b,g=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.transferLoading=!0,s=[],a=l["e"].chainId,e.next=5,this.$post("/","getAccountLedgerList",[t]).then(function(e){if(e.hasOwnProperty("result")){var t=!0,r=!1,n=void 0;try{for(var o,i=e.result[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var c=o.value;s.push({type:1,symbol:c.symbol,chainId:c.chainId,assetId:c.assetId,balance:Object(m["s"])(c.balance),decimals:c.decimals}),a=c.chainId}}catch(u){r=!0,n=u}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}}}).catch(function(e){console.log("getAccountLedgerList:"+e),g.assetsListLoading=!1});case 5:return n=[],e.next=8,this.$post("/","getAccountTokens",[1,100,t]).then(function(e){if(e.hasOwnProperty("result")){var t=!0,s=!1,r=void 0;try{for(var o,i=e.result.list[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var c=o.value;n.push({type:2,symbol:c.tokenSymbol,chainId:a,assetId:1,status:c.status,balance:Object(m["k"])(Object(m["b"])(c.balance,c.lockedBalance),c.decimals),contractAddress:c.contractAddress,decimals:c.decimals})}}catch(u){s=!0,r=u}finally{try{t||null==i.return||i.return()}finally{if(s)throw r}}}}).catch(function(e){console.log("getAccountTokens:"+e)});case 8:return o=n.filter(function(e){return 3!==e.status}),i=[],e.next=12,this.$post("/","getAccountCrossLedgerList",[t]).then(function(e){if(e.hasOwnProperty("result")){var t=!0,s=!1,r=void 0;try{for(var a,n=e.result[Symbol.iterator]();!(t=(a=n.next()).done);t=!0){var o=a.value;i.push({type:1,symbol:o.symbol,chainId:o.chainId,assetId:o.assetId,balance:Object(m["s"])(o.balance,o.decimals),decimals:o.decimals})}}catch(c){s=!0,r=c}finally{try{t||null==n.return||n.return()}finally{if(s)throw r}}}}).catch(function(e){console.log("getAccountCrossLedgerList:"+e)});case 12:this.assetsList=[].concat(s,Object(r["a"])(o),i),c=this.$route.query.accountType?this.$route.query.accountType:{type:1,tokenSymbol:l["e"]},"NULS"===this.$route.query.accountType&&(c={type:1,tokenSymbol:l["e"]},c.tokenSymbol.symbol="NULS"),c.contractAddress||c.tokenSymbol.symbol||(c.tokenSymbol.symbol="NULS"),c.contractAddress&&(c.symbol=c.tokenSymbol,c.tokenSymbol=c),u=!0,d=!1,f=void 0,e.prev=20,h=this.assetsList[Symbol.iterator]();case 22:if(u=(p=h.next()).done){e.next=38;break}if(b=p.value,1!==b.type){e.next=31;break}if(b.assetId!==c.tokenSymbol.assetId||b.chainId!==c.tokenSymbol.chainId){e.next=29;break}return this.changeType(b),this.transferLoading=!1,e.abrupt("return");case 29:e.next=35;break;case 31:if(!b.contractAddress||b.contractAddress!==c.contractAddress){e.next=35;break}return this.changeType(b),this.transferLoading=!1,e.abrupt("return");case 35:u=!0,e.next=22;break;case 38:e.next=44;break;case 40:e.prev=40,e.t0=e["catch"](20),d=!0,f=e.t0;case 44:e.prev=44,e.prev=45,u||null==h.return||h.return();case 47:if(e.prev=47,!d){e.next=50;break}throw f;case 50:return e.finish(47);case 51:return e.finish(44);case 52:this.transferLoading=!1;case 53:case"end":return e.stop()}},e,this,[[20,40,44,52],[45,,47,51]])}));function t(t){return e.apply(this,arguments)}return t}(),showBook:function(){var e=Object(m["e"])(1);this.bookData=e.hasOwnProperty("contactList")?e.contactList:[],this.bookDialog=!0},selectBook:function(e){this.transferForm.toAddress=e.address,this.bookDialog=!1,this.parameterValidation()},getAccountByAlias:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$post("/","getAccountByAlias",[t]);case 3:if(s=e.sent,!s.hasOwnProperty("result")){e.next=13;break}if(this.aliasToAddress=s.result.address,this.toAddressInfo=o.a.verifyAddress(this.aliasToAddress),1!==this.toAddressInfo.type){e.next=10;break}return e.next=10,this.verifyToAddress();case 10:return e.abrupt("return",{success:!0});case 13:return this.aliasToAddress="",e.abrupt("return",{success:!1});case 15:e.next=21;break;case 17:return e.prev=17,e.t0=e["catch"](0),console.log(e.t0),e.abrupt("return",{success:!1});case 21:case"end":return e.stop()}},e,this,[[0,17]])}));function t(t){return e.apply(this,arguments)}return t}(),verifyToAddress:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.toAddressInfo.chainId!==l["e"].chainId){e.next=6;break}return this.toAddressInfo.transferType=1,this.transferForm.fee=.001,e.abrupt("return",{success:!0});case 6:return this.toAddressInfo.transferType=5,this.transferForm.fee=.1,e.abrupt("return",{success:!0});case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),changeType:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.assetsInfo=t,this.transferForm.assetType=t.symbol,this.parameterValidation(),""!==this.transferForm.amount&&this.$refs.transferForm.validateField("amount");case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),parameterValidation:function(){if(this.transferForm.toAddress&&this.transferForm.amount)if(1===this.assetsInfo.type)2===this.toAddressInfo.type&&(this.assetsInfo.chainId===l["e"].chainId&&this.assetsInfo.assetId===l["e"].assetId?(this.toAddressInfo.transferType=3,this.transferPayable()):(this.toAddressInfo.amount="",this.$message({message:this.$t("transfer.transfer25"),type:"error",duration:3e3})));else if(1===this.toAddressInfo.type){var e=o.a.verifyAddress(this.transferForm.fromAddress),t=o.a.verifyAddress(this.transferForm.toAddress);e.chainId===t.chainId?(this.toAddressInfo.transferType=2,this.transferTransfer()):(this.toAddressInfo.transferType=6,this.transferCrossChain())}else this.toAddressInfo.transferType=4,this.transferTransfer()},transferTransfer:function(){this.contractInfoByContractAddress(this.assetsInfo.contractAddress,1);var e=c.a.CONTRACT_MAX_GASLIMIT,t=Number(this.transferForm.price),s=this.assetsInfo.contractAddress,r="transfer",a="",n=[this.aliasToAddress?this.aliasToAddress:this.transferForm.toAddress,Object(m["u"])(this.transferForm.amount,this.assetsInfo.decimals).toString()];this.validateContractCall(this.addressInfo.address,0,e,t,s,r,a,n)},transferPayable:function(){var e=c.a.CONTRACT_MAX_GASLIMIT,t=this.transferForm.price,s=this.aliasToAddress?this.aliasToAddress:this.transferForm.toAddress,r="_payable",a="",n=[];this.validateContractCall(this.addressInfo.address,Number(Object(m["d"])(this.transferForm.amount,1e8)),e,t,s,r,a,n)},transferCrossChain:function(){var e=c.a.CONTRACT_MAX_GASLIMIT,t=this.transferForm.price,s=this.assetsInfo.contractAddress,r="transferCrossChain",a="",n=[this.transferForm.toAddress,this.assetsInfo.decimals<=9?Number(Object(m["t"])(this.transferForm.amount,this.assetsInfo.decimals)):Object(m["u"])(this.transferForm.amount,this.assetsInfo.decimals)],o=Number(Object(m["t"])(.1,8));this.validateContractCall(this.addressInfo.address,o,e,t,s,r,a,n)},allAvailable:function(){this.$refs.transferForm.validateField("amount"),this.transferForm.amount=this.available.toString()},submitTransferForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;2===t.toAddressInfo.transferType&&(t.transferForm.fee=t.contractFee),t.transferDiolog=!0})},confirmTransfer:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,s,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.addressInfo.aesPri){e.next=4;break}this.$refs.password.showPassword(!0),e.next=29;break;case 4:return e.next=6,this.getNulsBalance(this.assetsInfo.chainId,1,this.transferForm.fromAddress);case 6:if(this.balanceInfo=e.sent,1===this.toAddressInfo.transferType){e.next=10;break}return this.$message({message:this.$t("tips.tips2"),type:"warning",duration:3e3}),e.abrupt("return");case 10:return e.next=12,Object(m["n"])(16);case 12:return t=e.sent,e.next=15,Object(m["n"])(16);case 15:return s=e.sent,e.next=18,this.transferAssemble();case 18:if(r=e.sent,r.success){e.next=22;break}return this.$message({message:this.$t("tips.tips3"),type:"error",duration:3e3}),e.abrupt("return");case 22:return e.next=24,Object(f["c"])(t,s,this.addressInfo.address,r.data);case 24:if(a=e.sent,a.success){e.next=28;break}return this.$message({message:this.$t("tips.tips4")+JSON.stringify(a.data),type:"error",duration:3e3}),e.abrupt("return");case 28:this.$refs.password.showScan(a.data.txInfo,a.data.assembleHex);case 29:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),transferAssemble:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,s,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={fromAddress:this.transferForm.fromAddress,assetsChainId:this.assetsInfo.chainId,assetsId:this.assetsInfo.assetId,fee:1e5},t["toAddress"]=this.aliasToAddress?this.aliasToAddress:this.transferForm.toAddress,t["amount"]=Number(Object(m["d"])(this.transferForm.amount,1e8).toString()),e.next=5,Object(f["j"])(t,this.balanceInfo,2);case 5:if(s=e.sent,s.success){e.next=9;break}return this.$message({message:this.$t("public.err1")+JSON.stringify(s.data),type:"error",duration:3e3}),e.abrupt("return",{success:!1});case 9:return e.next=11,o.a.transactionAssemble(s.data.inputs,s.data.outputs,this.transferForm.remarks,2);case 11:return r=e.sent,e.abrupt("return",{success:!0,data:r});case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),passSubmit:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var s,r,a,n,i,c,u,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["q"])(this.addressInfo,t);case 2:if(s=e.sent,s.success){e.next=6;break}return this.$message({message:this.$t("address.address13"),type:"error",duration:3e3}),e.abrupt("return");case 6:return this.transferDiolog=!1,this.transferLoading=!0,e.next=10,this.getNulsBalance(this.assetsInfo.chainId,this.assetsInfo.assetId,this.transferForm.fromAddress);case 10:if(this.balanceInfo=e.sent,r={fromAddress:this.transferForm.fromAddress,toAddress:this.aliasToAddress?this.aliasToAddress:this.transferForm.toAddress,assetType:this.transferForm.assetType,amount:Number(Object(m["t"])(this.transferForm.amount,this.assetsInfo.decimals)),gas:this.transferForm.gas,price:this.transferForm.price,remarks:this.transferForm.remarks,fee:Number(Object(m["t"])(this.transferForm.fee,this.defaultInfo.defaultAsset.decimals)),assetsChainId:this.assetsInfo.chainId,assetsId:this.assetsInfo.assetId},a={},n=[],i="",1!==this.toAddressInfo.transferType){e.next=24;break}return e.next=18,Object(f["j"])(r,this.balanceInfo,2);case 18:return a=e.sent,e.next=21,o.a.transactionAssemble(a.data.inputs,a.data.outputs,Object(m["o"])(this.transferForm.remarks),2);case 21:n=e.sent,e.next=86;break;case 24:if(2!==this.toAddressInfo.transferType){e.next=34;break}return r.amount=Number(Object(m["c"])(0,Number(Object(m["d"])(this.transferForm.gas,this.transferForm.price)))).toString(),e.next=28,Object(f["j"])(r,this.balanceInfo,16);case 28:return a=e.sent,e.next=31,o.a.transactionAssemble(a.data.inputs,a.data.outputs,Object(m["o"])(this.transferForm.remarks),16,this.contractCallData);case 31:n=e.sent,e.next=86;break;case 34:if(3!==this.toAddressInfo.transferType){e.next=47;break}return this.contractCallData.chainId=l["e"].chainId,r.value=Number(r.amount),r.amount=Number(Object(m["c"])(r.fee,Number(Object(m["d"])(this.transferForm.gas,this.transferForm.price)))).toString(),r.amount=Number(Object(m["c"])(r.amount,r.value)).toString(),e.next=41,Object(f["j"])(r,this.balanceInfo,16);case 41:return a=e.sent,e.next=44,o.a.transactionAssemble(a.data.inputs,a.data.outputs,Object(m["o"])(this.transferForm.remarks),16,this.contractCallData);case 44:n=e.sent,e.next=86;break;case 47:if(4!==this.toAddressInfo.transferType){e.next=57;break}return r.amount=Number(Object(m["c"])(0,Number(Object(m["d"])(this.transferForm.gas,this.transferForm.price)))).toString(),e.next=51,Object(f["j"])(r,this.balanceInfo,16);case 51:return a=e.sent,e.next=54,o.a.transactionAssemble(a.data.inputs,a.data.outputs,Object(m["o"])(this.transferForm.remarks),16,this.contractCallData);case 54:n=e.sent,e.next=86;break;case 57:if(5!==this.toAddressInfo.transferType){e.next=76;break}return r.amount=Number(r.amount).toString(),r.fee=Number(r.fee),e.next=62,this.crossTxhexs(s.pri,s.pub,this.addressInfo.chainId,r);case 62:return c=e.sent,e.prev=63,e.next=66,this.$post("/","sendCrossTx",[c]);case 66:u=e.sent,u.result.success?(this.toUrl("txList"),this.transferLoading=!1):this.$message({message:this.$t("tips.tips14")+JSON.stringify(u),type:"error",duration:3e3}),e.next=73;break;case 70:e.prev=70,e.t0=e["catch"](63),this.$message({message:this.$t("tips.tips14")+JSON.stringify(e.t0),type:"error",duration:3e3});case 73:return e.abrupt("return");case 76:if(6!==this.toAddressInfo.transferType){e.next=86;break}return r.amount=Number(Object(m["c"])(2e7,Number(Object(m["d"])(this.transferForm.gas,this.transferForm.price)))).toString(),r.value=1e7,r.toAddress=this.assetsInfo.contractAddress,e.next=82,Object(f["j"])(r,this.balanceInfo,16);case 82:return a=e.sent,e.next=85,o.a.transactionAssemble(a.data.inputs,a.data.outputs,Object(m["o"])(this.transferForm.remarks),16,this.contractCallData);case 85:n=e.sent;case 86:return e.next=88,o.a.transactionSerialize(s.pri,s.pub,n);case 88:return i=e.sent,e.next=91,Object(f["l"])(i);case 91:d=e.sent,d.success?(this.toUrl("txList"),this.transferLoading=!1):(this.$message({message:this.$t("tips.tips14")+JSON.stringify(d.data),type:"error",duration:3e3}),this.transferLoading=!1);case 93:case"end":return e.stop()}},e,this,[[63,70]])}));function t(t){return e.apply(this,arguments)}return t}(),getNulsBalance:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,s,r){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(f["g"])(t,s,r);case 3:if(a=e.sent,!a.success){e.next=8;break}return e.abrupt("return",a.data);case 8:return e.abrupt("return",{});case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e["catch"](0),console.log(e.t0),e.abrupt("return",{});case 15:case"end":return e.stop()}},e,null,[[0,11]])}));function t(t,s,r){return e.apply(this,arguments)}return t}(),contractInfoByContractAddress:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$post("/","getContract",[t]).then(function(e){return e.hasOwnProperty("result")?e.result:[]}).catch(function(e){return console.log(e),[]});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),validateContractCall:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,s,r,a,n,o,i,c){var u=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$post("/","validateContractCall",[t,s,r,a,n,o,i,c]).then(function(e){e.hasOwnProperty("result")?u.imputedContractCallGas(t,s,n,o,i,c):u.$message({message:u.$t("call.call6")+JSON.stringify(e.error),type:"error",duration:3e3})}).catch(function(e){u.$message({message:u.$t("call.call7")+e,type:"error",duration:3e3})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,s,r,a,n,o,i,c){return e.apply(this,arguments)}return t}(),imputedContractCallGas:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,s,r,n,o,i){var c=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$post("/","imputedContractCallGas",[t,s,r,n,o,i]).then(function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(a){var u,f;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a.hasOwnProperty("result")){e.next=16;break}return c.gasInfo.number=a.result.gasLimit,c.gasInfo.oldNumber=a.result.gasLimit,c.transferForm.gas=a.result.gasLimit,c.transferForm.fee=Number(Object(m["c"])(Number(Object(m["a"])(Number(Object(m["d"])(c.transferForm.gas,c.transferForm.price)),1e7)),.001)),c.contractFee=c.transferForm.fee,e.next=8,c.getContractMethodArgsTypes(r,n);case 8:if(u=e.sent,u.success){e.next=12;break}return console.log(JSON.stringify(u.data)),e.abrupt("return");case 12:f=d.a.twoDimensionalArray(i,u.data),c.contractCallData={chainId:l["e"].chainId,sender:t,contractAddress:r,value:s,gasLimit:c.transferForm.gas,price:c.transferForm.price,methodName:n,methodDesc:o,args:f},e.next=17;break;case 16:c.$message({message:c.$t("call.call4"),type:"error",duration:1e3});case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){c.$message({message:c.$t("call.call5")+e,type:"error",duration:1e3})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,s,r,a,n,o){return e.apply(this,arguments)}return t}(),getContractMethodArgsTypes:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,s){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$post("/","getContractMethodArgsTypes",[t,s]).then(function(e){return e.hasOwnProperty("result")?{success:!0,data:e.result}:{success:!1,data:e.error}}).catch(function(e){return{success:!1,data:e}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));function t(t,s){return e.apply(this,arguments)}return t}(),crossTxhexs:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(r,a,n,i){var c,u,d,h,p,b,g,y,v,I,k,x,A,w,C,F,$,O=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(f["g"])(i.assetsChainId,i.assetsId,i.fromAddress);case 2:return c=t.sent,u=[],d=[{address:i.toAddress?i.toAddress:i.fromAddress,assetsChainId:i.assetsChainId,assetsId:i.assetsId,amount:i.amount,lockTime:0}],t.next=7,Object(f["g"])(l["e"].chainId,l["e"].assetId,i.fromAddress);case 7:if(h=t.sent,Object(f["k"])(n)){t.next=12;break}if(!(h.data.balance<i.fee)){t.next=12;break}return this.$message({message:this.$t("newConsensus.newConsensus7"),type:"error",duration:3e3}),t.abrupt("return");case 12:if(n!==i.assetsChainId||1!==i.assetsId){t.next=21;break}if(b=Number(Object(m["c"])(i.amount,i.fee)),!(c.data.balance<b)){t.next=17;break}return this.$message({message:this.$t("newConsensus.newConsensus7"),type:"error",duration:3e3}),t.abrupt("return");case 17:u.push({address:i.fromAddress,assetsChainId:i.assetsChainId,assetsId:i.assetsId,amount:b,locked:0,nonce:c.data.nonce}),Object(f["k"])(n)||u.push({address:i.fromAddress,assetsChainId:l["e"].chainId,assetsId:l["e"].assetId,amount:i.fee,locked:0,nonce:h.data.nonce}),t.next=38;break;case 21:return t.next=23,Object(f["g"])(n,1,i.fromAddress);case 23:if(p=t.sent,!(p.data.balance<i.fee)){t.next=27;break}return this.$message({message:this.$t("transfer.transfer20"),type:"error",duration:3e3}),t.abrupt("return");case 27:if(i.assetsChainId!==l["e"].chainId||1!==i.assetsId){t.next=35;break}if(g=i.amount+i.fee,!(h.data.balance<g)){t.next=32;break}return this.$message({message:this.$t("newConsensus.newConsensus7"),type:"error",duration:3e3}),t.abrupt("return");case 32:u.push({address:i.fromAddress,assetsChainId:i.assetsChainId,assetsId:i.assetsId,amount:g,locked:0,nonce:h.data.nonce}),t.next=37;break;case 35:u.push({address:i.fromAddress,assetsChainId:i.assetsChainId,assetsId:i.assetsId,amount:i.amount,locked:0,nonce:c.data.nonce}),u.push({address:i.fromAddress,assetsChainId:l["e"].chainId,assetsId:l["e"].assetId,amount:i.fee,locked:0,nonce:h.data.nonce});case 37:Object(f["k"])(n)||u.push({address:i.fromAddress,assetsChainId:n,assetsId:1,amount:i.fee,locked:0,nonce:p.data.nonce});case 38:return t.next=40,o.a.transactionAssemble(u,d,i.remark,10);case 40:if(y=t.sent,v="",I="",k=s("4077"),x=s("a648"),A=new x,w=new k.CrossChainTransaction,C=e.from(a,"hex"),F=0,!Object(f["k"])(n)){t.next=54;break}return t.next=52,Object(f["d"])(y,1).then(function(e){F=e}).catch(function(e){O.$message({message:O.$t("newConsensus.newConsensus7"),type:"error",duration:3e3}),console.log(e)});case 52:t.next=61;break;case 54:return t.next=56,Object(f["d"])(y,2).then(function(e){F=e}).catch(function(e){O.$message({message:O.$t("newConsensus.newConsensus7"),type:"error",duration:3e3}),console.log(e)});case 56:w.time=y.time,w.remark=y.remark,$=[],i.assetsChainId===l["e"].chainId&&1===i.assetsId?$.push({address:i.fromAddress,assetsChainId:i.assetsChainId,assetsId:i.assetsId,amount:i.amount+F,locked:0,nonce:h.data.nonce}):$=[{address:i.fromAddress,assetsChainId:i.assetsChainId,assetsId:i.assetsId,amount:i.amount,locked:0,nonce:c.data.nonce},{address:i.fromAddress,assetsChainId:l["e"].chainId,assetsId:l["e"].assetId,amount:F,locked:0,nonce:h.data.nonce}],w.setCoinData($,d);case 61:if(i.fee===F){t.next=89;break}if(n!==i.assetsChainId||1!==i.assetsId){t.next=70;break}if(!(c.data.balance<Number(Object(m["c"])(i.amount,F)))){t.next=66;break}return this.$message({message:this.$t("newConsensus.newConsensus7"),type:"error",duration:3e3}),t.abrupt("return");case 66:u[0].amount=Number(Object(m["c"])(i.amount,F)),Object(f["k"])(n)||(u[1].amount=F),t.next=83;break;case 70:if(!(p.data.balance<i.fee)){t.next=73;break}return this.$message({message:this.$t("transfer.transfer20"),type:"error",duration:3e3}),t.abrupt("return");case 73:if(i.assetsChainId!==l["e"].chainId||1!==i.assetsId){t.next=81;break}if(!(h.data.balance<Number(Object(m["c"])(i.amount,F)))){t.next=77;break}return this.$message({message:this.$t("newConsensus.newConsensus7"),type:"error",duration:3e3}),t.abrupt("return");case 77:u[0].amount=Number(Object(m["c"])(i.amount,F)),u[1].amount=F,t.next=83;break;case 81:u[0].amount=Number(i.amount),u[1].amount=F;case 83:return t.next=85,o.a.transactionAssemble(u,d,i.remark,10);case 85:y=t.sent,v=o.a.transactionSignature(r,y),t.next=90;break;case 89:v=o.a.transactionSignature(r,y);case 90:return A.writeBytesWithLength(C),A.writeBytesWithLength(v),Object(f["k"])(n)||(I=o.a.transactionSignature(r,w),A.writeBytesWithLength(C),A.writeBytesWithLength(I)),y.signatures=A.getBufWriter().toBuffer(),t.abrupt("return",y.txSerialize().toString("hex"));case 95:case"end":return t.stop()}},t,this)}));function r(e,s,r,a){return t.apply(this,arguments)}return r}(),toUrl:function(e){this.$router.push({name:e})}}}}).call(this,s("1c35").Buffer)},aae3:function(e,t,s){var r=s("d3f4"),a=s("2d95"),n=s("2b4c")("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[n])?!!t:"RegExp"==a(e))}},e065:function(module,exports,__webpack_require__){"use strict";function valueOfstring(e){return null===e?null:e.toString()}function isBlank(e){return null===e||0===e.trim().length}module.exports={stringToByte:function(e){var t=[],s=void 0,r=void 0;s=e.length;for(var a=0;a<s;a++)r=e.charCodeAt(a),r>=65536&&r<=1114111?(t.push(r>>18&7|240),t.push(r>>12&63|128),t.push(r>>6&63|128),t.push(63&r|128)):r>=2048&&r<=65535?(t.push(r>>12&15|224),t.push(r>>6&63|128),t.push(63&r|128)):r>=128&&r<=2047?(t.push(r>>6&31|192),t.push(63&r|128)):t.push(255&r);return t},twoDimensionalArray:function twoDimensionalArray(args,types){if(0===args.length)return null;if(args.length!==types.length)throw"args number error";for(var length=args.length,two=new Array(length),arg=void 0,i=0;i<length;i++)if(arg=args[i],null!=arg)if("string"===typeof arg){var argStr=arg;if(null!=types&&isBlank(argStr)&&"String"!==types[i])two[i]=[];else if(null!=types&&!isBlank(argStr)&&types[i].indexOf("[]")>=0){var arrayArg=eval(argStr);if(!Array.isArray(arrayArg))throw"array arg error";for(var len=arrayArg.length,result=new Array(len),k=0;k<len;k++)result[k]=valueOfstring(arrayArg[k]);two[i]=result}else two[i]=[argStr]}else if(Array.isArray(arg)){for(var _len=arg.length,_result=new Array(_len),_k=0;_k<_len;_k++)_result[_k]=valueOfstring(arg[_k]);two[i]=_result}else two[i]=[valueOfstring(arg)];else two[i]=[];return two}}}}]);
//# sourceMappingURL=chunk-60d9987c.774724e7.js.map