(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60a20c52"],{"033b":function(e,s,t){"use strict";var a=t("e0a2"),r=t.n(a);r.a},"2e64":function(e,s,t){"use strict";var a=t("ff03"),r=t.n(a);r.a},b301:function(e,s,t){"use strict";var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"back",attrs:{backUrl:e.backUrl}},[t("span",{staticClass:"back-box",on:{click:e.back}},[t("i",{staticClass:"el-icon-arrow-left"}),t("span",[e._v(e._s(e.backTitle))])])])},r=[],n={props:{backTitle:{type:String,default:""},backUrl:{type:String,default:"1"},backParams:{type:String,default:""}},methods:{back:function(){"1"===this.backUrl?this.$router.go(-1):this.$router.push({name:this.backUrl})}}},i=n,c=(t("2e64"),t("2877")),o=Object(c["a"])(i,a,r,!1,null,null,null);s["a"]=o.exports},e0a2:function(e,s,t){},eb26:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"new_address bg-gray"},[t("div",{staticClass:"bg-white"},[t("div",{staticClass:"w1200"},[t("BackBar",{attrs:{backTitle:e.$t("address.address0")}}),t("h3",{staticClass:"title"},[e._v(e._s(e.$t("setAlias.setAlias0")))])],1)]),t("div",{staticClass:"new w1200 mt_20 bg-white"},[t("div",{staticClass:"w630"},[t("h3",{staticClass:"tc mzt_20"},[e._v(e._s(this.$route.query.address))]),t("div",{staticClass:"tip bg-gray"},[t("p",[e._v("• "+e._s(e.$t("setAlias.setAlias1"))+e._s(e.symbol)+e._s(e.$t("setAlias.setAlias11")))]),t("p",[e._v("• "+e._s(e.$t("setAlias.setAlias2"))+e._s(e.symbol))])]),t("el-form",{ref:"aliasForm",staticClass:"mb_20",attrs:{model:e.aliasForm,"status-icon":"",rules:e.aliasRules}},[t("el-form-item",{attrs:{label:e.$t("public.alias"),prop:"alias"}},[t("span",{staticClass:"balance font12 fr"},[e._v(e._s(e.$t("public.usableBalance"))+"："+e._s(e.addressInfo.balance)+" "),t("font",{staticClass:"fCN"},[e._v(e._s(e.symbol))])],1),t("el-input",{attrs:{type:"text",maxlength:"20",autocomplete:"off"},model:{value:e.aliasForm.alias,callback:function(s){e.$set(e.aliasForm,"alias",s)},expression:"aliasForm.alias"}})],1),t("div",{staticClass:"div-data font14"},[e._v("\n          "+e._s(e.$t("public.fee"))+": "),t("label",[e._v("0.001 "),t("span",{staticClass:"fCN"},[e._v(e._s(e.symbol))])])]),t("el-form-item",{staticClass:"form-next"},[t("el-button",{attrs:{type:"success"},on:{click:function(s){return e.submitAliasForm("aliasForm")}}},[e._v(" "+e._s(e.$t("public.next")))])],1),t("div",{staticClass:"tc font18 mzt_20"},[e._v("\n          "+e._s(e.$t("setAlias.setAlias3"))+": 1.001 "),t("span",{staticClass:"fCN"},[e._v(e._s(e.symbol))])])],1)],1)]),t("Password",{ref:"password",on:{passwordSubmit:e.passSubmit}})],1)},r=[],n=(t("96cf"),t("3b8d")),i=(t("ac4d"),t("8a81"),t("ac6a"),t("0ad0")),c=t.n(i),o=t("1959"),l=t("d1f0"),u=t("b301"),d=t("db49"),f=t("6ace"),b={data:function(){var e=this,s=function(s,t,a){var r=/^(?!_)(?!.*?_$)[a-z0-9_]+$/;""===t?a(new Error(e.$t("setAlias.setAlias4"))):r.exec(t)?a():a(new Error(e.$t("setAlias.setAlias5")))};return{aliasForm:{alias:""},aliasRules:{alias:[{validator:s,trigger:"blur"}]},addressInfo:"",balanceInfo:"",prefix:"",symbol:sessionStorage.hasOwnProperty("info")?JSON.parse(sessionStorage.getItem("info")).defaultAsset.symbol:"NULS",getSetAliasRandomString:"",sendSetAliasRandomString:""}},created:function(){var e=this;Object(o["h"])(Object(f["f"])()).then(function(s){e.prefix=s}).catch(function(s){console.log(s),e.prefix=""});var s=!0,t=!1,a=void 0;try{for(var r,n=Object(f["e"])(0)[Symbol.iterator]();!(s=(r=n.next()).done);s=!0){var i=r.value;i.address===this.$route.query.address&&(this.addressInfo=i)}}catch(c){t=!0,a=c}finally{try{s||null==n.return||n.return()}finally{if(t)throw a}}},mounted:function(){var e=this;setTimeout(function(){e.getNulsBalance(Object(f["f"])(),1,e.$route.query.address)},600)},watch:{addressInfo:function(e,s){e.address!==s.address&&s.address&&(this.transferForm.fromAddress=this.addressInfo.address)}},components:{Password:l["a"],BackBar:u["a"]},methods:{submitAliasForm:function(e){var s=this;this.$refs[e].validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var a,r,n,i,c,l,u,d,b,p;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=57;break}if(!(s.balanceInfo.balance>1001e5)){e.next=54;break}a=s.$route.query.address,r=Object(f["e"])(0),n=!0,i=!1,c=void 0,e.prev=7,l=r[Symbol.iterator]();case 9:if(n=(u=l.next()).done){e.next=38;break}if(d=u.value,d.address!==a){e.next=35;break}if(""!==d.aesPri){e.next=34;break}return e.next=15,Object(f["n"])(16);case 15:return s.getSetAliasRandomString=e.sent,e.next=18,Object(f["n"])(16);case 18:return s.sendSetAliasRandomString=e.sent,e.next=21,s.setAliasAssemble();case 21:if(b=e.sent,b.success){e.next=25;break}return s.$message({message:s.$t("tips.tips3"),type:"error",duration:3e3}),e.abrupt("return");case 25:return e.next=27,Object(o["c"])(s.getSetAliasRandomString,s.sendSetAliasRandomString,d.address,b.data);case 27:if(p=e.sent,p.success){e.next=31;break}return s.$message({message:s.$t("tips.tips4")+JSON.stringify(p.data),type:"error",duration:3e3}),e.abrupt("return");case 31:s.$refs.password.showScan(p.data.txInfo,p.data.assembleHex),e.next=35;break;case 34:s.$refs.password.showPassword(!0);case 35:n=!0,e.next=9;break;case 38:e.next=44;break;case 40:e.prev=40,e.t0=e["catch"](7),i=!0,c=e.t0;case 44:e.prev=44,e.prev=45,n||null==l.return||l.return();case 47:if(e.prev=47,!i){e.next=50;break}throw c;case 50:return e.finish(47);case 51:return e.finish(44);case 52:e.next=55;break;case 54:s.$message({message:s.$t("newConsensus.newConsensus7"),type:"error",duration:1e3});case 55:e.next=58;break;case 57:return e.abrupt("return",!1);case 58:case"end":return e.stop()}},e,null,[[7,40,44,52],[45,,47,51]])}));return function(s){return e.apply(this,arguments)}}())},getNulsBalance:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(s,t,a){var r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$post("/","getAccountBalance",[s,t,a]).then(function(e){e.hasOwnProperty("result")?r.balanceInfo={balance:e.result.balance,nonce:e.result.nonce}:r.$message({message:r.$t("public.err2")+e,type:"error",duration:1e3})}).catch(function(e){r.$message({message:r.$t("public.err3")+e,type:"error",duration:1e3})});case 2:case"end":return e.stop()}},e,this)}));function s(s,t,a){return e.apply(this,arguments)}return s}(),passSubmit:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(s){var t,a,r,n,i,l,u,b,p=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=c.a.decrypteOfAES(this.addressInfo.aesPri,s),a=c.a.importByKey(Object(f["f"])(),t,s,this.prefix),a.address!==this.addressInfo.address){e.next=19;break}return r=c.a.getAddressByPub(Object(f["f"])(),1,d["a"],this.prefix),n={fromAddress:this.addressInfo.address,toAddress:r,assetsChainId:Object(f["f"])(),assetsId:1,amount:1e8,fee:1e5},e.next=7,Object(o["j"])(n,this.balanceInfo,3);case 7:return i=e.sent,l={fromAddress:this.addressInfo.address,alias:this.aliasForm.alias},e.next=11,c.a.transactionAssemble(i.data.inputs,i.data.outputs,"",3,l);case 11:return u=e.sent,e.next=14,c.a.transactionSerialize(c.a.decrypteOfAES(this.addressInfo.aesPri,s),this.addressInfo.pub,u);case 14:return b=e.sent,e.next=17,Object(o["l"])(b).then(function(e){e.success?p.toUrl("txList"):p.$message({message:p.$t("error."+e.data.code),type:"error",duration:3e3})}).catch(function(e){p.$message({message:p.$t("public.err0")+e,type:"error",duration:1e3})});case 17:e.next=20;break;case 19:this.$message({message:this.$t("address.address13"),type:"error",duration:1e3});case 20:case"end":return e.stop()}},e,this)}));function s(s){return e.apply(this,arguments)}return s}(),setAliasAssemble:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var s,t,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=c.a.getAddressByPub(Object(f["f"])(),1,d["a"],this.prefix),t={fromAddress:this.addressInfo.address,toAddress:s,assetsChainId:Object(f["f"])(),assetsId:1,amount:1e8,fee:1e5},e.next=4,Object(o["j"])(t,this.balanceInfo,3);case 4:return a=e.sent,r={fromAddress:this.addressInfo.address,alias:this.aliasForm.alias},e.next=8,c.a.transactionAssemble(a.data.inputs,a.data.outputs,"",3,r);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,this)}));function s(){return e.apply(this,arguments)}return s}(),toUrl:function(e){this.$router.push({name:e})}}},p=b,m=(t("033b"),t("2877")),h=Object(m["a"])(p,a,r,!1,null,null,null);s["default"]=h.exports},ff03:function(e,s,t){}}]);
//# sourceMappingURL=chunk-60a20c52.b7544b0c.js.map