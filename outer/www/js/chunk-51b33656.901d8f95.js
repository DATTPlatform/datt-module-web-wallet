(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51b33656"],{"2e64":function(e,s,t){"use strict";var a=t("ff03"),n=t.n(a);n.a},"45e9":function(e,s,t){"use strict";var a=t("90c8"),n=t.n(a);n.a},"90c8":function(e,s,t){},a475:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"consensus_info bg-gray"},[t("div",{staticClass:"bg-white"},[t("div",{staticClass:"w1200"},[t("BackBar",{attrs:{backTitle:e.$t("nav.consensus")}}),t("h3",{staticClass:"title uppercase"},[e._v(e._s(e.nodeInfo.agentId)),t("i",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"el-icon-star-off click"})])],1)]),t("div",{staticClass:"card_long mt_20 w1200 bg-white"},[t("h5",{staticClass:"card-title font18"},[e._v("\n      "+e._s(e.$t("consensusInfo.consensusInfo6"))+"\n      "),t("i",{staticClass:"iconfont",class:0===e.nodeInfo.status?"icondaigongshi fred":"icongongshizhong fCN"}),t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.addressInfo.address===e.nodeInfo.agentAddress,expression:"addressInfo.address === nodeInfo.agentAddress"}],staticClass:"fr fred",attrs:{type:"danger"},on:{click:e.stopNode}},[e._v(e._s(e.$t("consensusInfo.consensusInfo5"))+"\n      ")])],1),t("ul",[t("li",[e._v(e._s(e.$t("public.createAddress"))+" "),t("label",[e._v(e._s(e.nodeInfo.agentAddress))])]),t("li",[e._v(e._s(e.$t("public.deposit"))+" "),t("label",[e._v(e._s(e.nodeInfo.deposits)),t("span",{staticClass:"fCN"},[e._v(e._s(e.agentAsset.agentAsset.symbol))])])]),t("li",[e._v(e._s(e.$t("public.rewardAddress"))+" "),t("label",[e._v(e._s(e.nodeInfo.rewardAddress))])]),t("li",[e._v(e._s(e.$t("public.totalStake"))+" "),t("label",[e._v(e._s(e.nodeInfo.totalDeposit)),t("span",{staticClass:"fCN"},[e._v(e._s(e.agentAsset.agentAsset.symbol))])])]),t("li",[e._v(e._s(e.$t("public.packingAddress"))+" "),t("label",[e._v(e._s(e.nodeInfo.packingAddress))])]),t("li",[e._v(e._s(e.$t("consensusInfo.consensusInfo7"))+" "),t("label",[e._v(e._s(e.nodeInfo.totalReward)),t("span",{staticClass:"fCN"},[e._v(e._s(e.addressInfo.symbol))])])]),t("li",[e._v(e._s(e.$t("consensusInfo.consensusInfo8"))+" "),t("label",[e._v(e._s(e.nodeInfo.agentAlias?e.nodeInfo.agentAlias:"--"))])]),t("li",[e._v(e._s(e.$t("public.participants"))+" "),t("label",[e._v(e._s(e.nodeInfo.depositCount))])]),t("li",[e._v(e._s(e.$t("consensusInfo.consensusInfo9"))+" "),t("label",[e._v(e._s(e.nodeInfo.createTime))])]),t("li",[e._v(e._s(e.$t("public.commission"))+"\n        "),t("label",[e._v(e._s(e.nodeInfo.commissionRate)+"%\n          "),t("el-tooltip",{attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n              "+e._s(e.$t("consensusInfo.consensusInfo12"))+"\n            ")]),t("i",{staticClass:"el-icon-warning"})])],1)]),t("li",[e._v(e._s(e.$t("consensusInfo.consensusInfo10"))+" "),t("label",[t("u",{staticClass:"click td",on:{click:function(s){return e.toUrl("consensusInfo",e.nodeInfo.txHash)}}},[e._v(e._s(e.nodeInfo.yellowCardCount)+e._s(e.$t("consensusInfo.consensusInfo11")))])])]),t("li",[e._v(e._s(e.$t("public.credit"))+" "),t("label",[e._v(e._s(e.nodeInfo.creditValue))])]),t("p",{staticClass:"cb"})])]),t("div",{staticClass:"cb"}),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.nodeDepositLoading,expression:"nodeDepositLoading"}]},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.jionNode,expression:"jionNode"}],staticClass:"entrust w1200 bg-white"},[t("div",{staticClass:"entrust_add w630"},[t("el-form",{ref:"jionNodeForm",attrs:{model:e.jionNodeForm,"status-icon":"",rules:e.jionNodeRules},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{label:e.$t("consensusInfo.consensusInfo1")+"("+e.agentAsset.agentAsset.symbol+")",prop:"amount"}},[t("span",{staticClass:"balance font12 fr"},[e._v(e._s(e.$t("consensus.consensus2"))+"："+e._s(e.balanceInfo.balance/1e8))]),t("el-input",{model:{value:e.jionNodeForm.amount,callback:function(s){e.$set(e.jionNodeForm,"amount",s)},expression:"jionNodeForm.amount"}})],1),t("div",{staticClass:"font14"},[e._v("\n            "+e._s(e.$t("public.fee"))+": "+e._s(e.fee)+" "),t("span",{staticClass:"fCN"},[e._v(e._s(e.agentAsset.agentAsset.symbol))])]),t("el-form-item",{staticClass:"form-next"},[t("el-button",{attrs:{type:"success"},on:{click:function(s){return e.jionNodeSubmitForm("jionNodeForm")}}},[e._v(e._s(e.$t("password.password3"))+"\n            ")])],1)],1)],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.jionNode,expression:"!jionNode"}],staticClass:"entrust_list w1200"},[t("div",{staticClass:"top_total font14"},[e._v("\n        "+e._s(e.$t("public.totalStake"))+"："+e._s(e.nodeInfo.totalDeposit)+" "),t("span",{staticClass:"fCN"},[e._v(e._s(e.agentAsset.agentAsset.symbol))])]),t("div",{staticClass:"top_ico"},[t("i",{staticClass:"el-icon-plus click",on:{click:e.showNodeList}})]),t("el-table",{attrs:{data:e.nodeDepositData,stripe:"",border:""}},[t("el-table-column",{attrs:{prop:"blockHeight",label:e.$t("public.height"),align:"center"}}),t("el-table-column",{attrs:{prop:"createTime",label:e.$t("consensusList.consensusList1"),align:"center"}}),t("el-table-column",{attrs:{prop:"amount",label:e.$t("public.amount")+"("+e.agentAsset.agentAsset.symbol+")",align:"center"}}),t("el-table-column",{attrs:{label:e.$t("public.operation"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("label",{staticClass:"click tab_bn",on:{click:function(t){return e.cancelDeposit(s.row)}}},[e._v(e._s(e.$t("consensusInfo.consensusInfo0")))])]}}])})],1),t("div",{staticClass:"pages"},[t("div",{staticClass:"page-total"},[e._v("\n          "+e._s(e.$t("public.display"))+" "+e._s(e.pageIndex-1===0?1:(e.pageIndex-1)*e.pageSize)+"-"+e._s(e.pageIndex*e.pageSize)+"\n          "+e._s(e.$t("public.total"))+" "+e._s(e.pageTotal)+"\n        ")]),t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.pageTotal>e.pageSize,expression:"pageTotal>pageSize"}],staticClass:"fr",attrs:{background:"","page-size":e.pageSize,layout:" prev, pager, next, jumper",total:e.pageTotal},on:{"current-change":e.nodeDepositPages}})],1)],1)]),t("Password",{ref:"password",on:{passwordSubmit:e.passSubmit}})],1)},n=[],r=(t("6b54"),t("96cf"),t("3b8d")),o=(t("ac4d"),t("8a81"),t("ac6a"),t("c5f6"),t("c32d")),i=t.n(o),c=t("0ad0"),u=t.n(c),d=t("1959"),l=t("6ace"),h=t("d1f0"),p=t("b301"),f={data:function(){var e=this,s=function(s,t,a){var n=Number(Object(l["b"])(5e5,Number(e.nodeInfo.totalDeposit))),r=Number(Object(l["b"])(e.balanceInfo.balance,Number(Object(l["d"])(t,1e8)))),o=/^\d+(?=\.{0,1}\d+$|$)/,i=/^\d{1,8}(\.\d{1,8})?$/;if(!t)return a(new Error(e.$t("consensusInfo.consensusInfo2")));if(o.exec(t)&&i.exec(t)){if(t<2e3)return a(new Error(e.$t("consensusInfo.consensusInfo43")));if(t>n)return a(new Error(e.$t("consensusInfo.consensusInfo41")+n+e.$t("consensusInfo.consensusInfo42")));if(r<.001)return a(new Error(e.$t("transfer.transfer131")+Number(Object(l["b"])(Number(Object(l["s"])(e.balanceInfo.balance)),.001))));a()}else a(new Error(e.$t("consensusInfo.consensusInfo3")))};return{addressInfo:{},balanceInfo:{},agentAsset:JSON.parse(sessionStorage.getItem("info")),nodeInfo:{},fee:.001,outInfo:"",passwordType:0,jionNode:!1,nodeDepositData:[],nodeDepositLoading:!0,pageIndex:1,pageSize:5,pageTotal:0,jionNodeForm:{amount:""},jionNodeRules:{amount:[{validator:s,trigger:["blur","change"]}]},prefix:"",txHexRandom:"",signDataKeyRandom:""}},created:function(){var e=this;Object(d["h"])(Object(l["f"])()).then(function(s){e.prefix=s}).catch(function(s){console.log(s),e.prefix=""}),this.addressInfo=Object(l["e"])(1),setInterval(function(){e.addressInfo=Object(l["e"])(1)},500)},mounted:function(){var e=this;setTimeout(function(){e.getBalanceByAddress(e.agentAsset.agentAsset.chainId,e.agentAsset.agentAsset.assetId,e.addressInfo.address),e.getNodeInfoByHash(e.$route.query.hash),e.getNodeDepositByHash(e.pageIndex,e.pageSize,e.addressInfo.address,e.$route.query.hash)},600)},components:{Password:h["a"],BackBar:p["a"]},methods:{getNodeInfoByHash:function(e){var s=this;this.$post("/","getConsensusNode",[e]).then(function(e){e.hasOwnProperty("result")&&(e.result.agentReward=Object(l["s"])(e.result.agentReward),e.result.deposits=Object(l["s"])(e.result.deposit),e.result.totalDeposit=Object(l["s"])(e.result.totalDeposit),e.result.totalReward=Object(l["s"])(e.result.totalReward),e.result.createTime=i()(Object(l["m"])(1e3*e.result.createTime)).format("YYYY-MM-DD HH:mm:ss"),s.nodeInfo=e.result)}).catch(function(e){console.log("getConsensusNode:"+e)})},getNodeDepositByHash:function(e,s,t,a){var n=this;this.$post("/","getAccountDeposit",[e,s,t,a]).then(function(e){if(e.hasOwnProperty("result")){var s=!0,t=!1,a=void 0;try{for(var r,o=e.result.list[Symbol.iterator]();!(s=(r=o.next()).done);s=!0){var c=r.value;c.amount=Object(l["s"])(c.amount),c.fee=Object(l["s"])(c.fee),c.createTime=i()(Object(l["m"])(1e3*c.createTime)).format("YYYY-MM-DD HH:mm:ss")}}catch(u){t=!0,a=u}finally{try{s||null==o.return||o.return()}finally{if(t)throw a}}n.nodeDepositData=e.result.list,0===e.result.totalCount?n.jionNode=!0:n.jionNode=!1,n.pageTotal=e.result.totalCount,n.nodeDepositLoading=!1}else n.nodeDepositLoading=!1}).catch(function(e){console.log("getConsensusDeposit:"+e)})},nodeDepositPages:function(e){this.pageIndex=e,this.getNodeDepositByHash(this.pageIndex,this.pageSize,this.addressInfo.address,this.$route.query.hash)},showNodeList:function(){this.jionNode=!0,this.getNodeDepositByHash(this.pageIndex,this.pageSize,this.$route.query.hash)},jionNodeSubmitForm:function(e){var s=this;this.$refs[e].validate(function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=27;break}if(s.passwordType=0,""!==s.addressInfo.aesPri){e.next=24;break}return e.next=5,Object(l["n"])(16);case 5:return s.txHexRandom=e.sent,e.next=8,Object(l["n"])(16);case 8:return s.signDataKeyRandom=e.sent,e.next=11,s.getAssemble();case 11:if(a=e.sent,a.success){e.next=15;break}return s.$message({message:s.$t("tips.tips3"),type:"error",duration:3e3}),e.abrupt("return");case 15:return e.next=17,Object(d["c"])(s.txHexRandom,s.signDataKeyRandom,s.addressInfo.address,a.data);case 17:if(n=e.sent,n.success){e.next=21;break}return s.$message({message:s.$t("tips.tips4")+JSON.stringify(n.data),type:"error",duration:3e3}),e.abrupt("return");case 21:s.$refs.password.showScan(n.data.txInfo,n.data.assembleHex),e.next=25;break;case 24:s.$refs.password.showPassword(!0);case 25:e.next=28;break;case 27:return e.abrupt("return",!1);case 28:case"end":return e.stop()}},e)}));return function(s){return e.apply(this,arguments)}}())},getBalanceByAddress:function(e,s,t){var a=this;Object(d["g"])(e,s,t).then(function(e){e.success?a.balanceInfo=e.data:a.$message({message:a.$t("public.err2")+e,type:"error",duration:1e3})}).catch(function(e){a.$message({message:a.$t("public.err3")+e,type:"error",duration:1e3})})},cancelDeposit:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(s){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.outInfo=s,this.getBalanceByAddress(this.agentAsset.agentAsset.chainId,this.agentAsset.agentAsset.assetId,this.addressInfo.address),this.passwordType=1,""!==this.addressInfo.aesPri){e.next=25;break}return e.next=6,Object(l["n"])(16);case 6:return this.txHexRandom=e.sent,e.next=9,Object(l["n"])(16);case 9:return this.signDataKeyRandom=e.sent,e.next=12,this.getAssemble();case 12:if(t=e.sent,t.success){e.next=16;break}return this.$message({message:this.$t("tips.tips3"),type:"error",duration:3e3}),e.abrupt("return");case 16:return e.next=18,Object(d["c"])(this.txHexRandom,this.signDataKeyRandom,this.addressInfo.address,t.data);case 18:if(a=e.sent,a.success){e.next=22;break}return this.$message({message:this.$t("tips.tips4")+JSON.stringify(a.data),type:"error",duration:3e3}),e.abrupt("return");case 22:this.$refs.password.showScan(a.data.txInfo,a.data.assembleHex),e.next=26;break;case 25:this.$refs.password.showPassword(!0);case 26:case"end":return e.stop()}},e,this)}));function s(s){return e.apply(this,arguments)}return s}(),stopNode:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var s,t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.getBalanceByAddress(this.agentAsset.agentAsset.chainId,this.agentAsset.agentAsset.assetId,this.addressInfo.address),this.passwordType=2,""!==this.addressInfo.aesPri){e.next=24;break}return e.next=5,Object(l["n"])(16);case 5:return this.txHexRandom=e.sent,e.next=8,Object(l["n"])(16);case 8:return this.signDataKeyRandom=e.sent,e.next=11,this.getAssemble();case 11:if(s=e.sent,s.success){e.next=15;break}return this.$message({message:this.$t("tips.tips3"),type:"error",duration:3e3}),e.abrupt("return");case 15:return e.next=17,Object(d["c"])(this.txHexRandom,this.signDataKeyRandom,this.addressInfo.address,s.data);case 17:if(t=e.sent,t.success){e.next=21;break}return this.$message({message:this.$t("tips.tips4")+JSON.stringify(t.data),type:"error",duration:3e3}),e.abrupt("return");case 21:this.$refs.password.showScan(t.data.txInfo,t.data.assembleHex),e.next=25;break;case 24:this.$refs.password.showPassword(!0);case 25:case"end":return e.stop()}},e,this)}));function s(){return e.apply(this,arguments)}return s}(),passSubmit:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(s){var t,a,n,r,o,i,c,h,p,f,b,m,g,I,x,v,$,_,w,y,k,j,A,N=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=u.a.decrypteOfAES(this.addressInfo.aesPri,s),a=u.a.importByKey(this.addressInfo.chainId,t,s,this.prefix),a.address!==this.addressInfo.address){e.next=101;break}if(n={fromAddress:this.addressInfo.address,assetsChainId:this.agentAsset.agentAsset.chainId,assetsId:this.agentAsset.agentAsset.assetId,amount:Number(Object(l["d"])(this.jionNodeForm.amount,1e8)),fee:1e5},r={},o="",i=this.addressInfo.pub,c="",0!==this.passwordType){e.next=24;break}return e.next=11,Object(d["j"])(n,this.balanceInfo,5);case 11:if(r=e.sent,h={address:this.addressInfo.address,agentHash:this.$route.query.hash,deposit:Number(Object(l["d"])(this.jionNodeForm.amount,1e8))},r.success){e.next=16;break}return this.$message({message:this.$t("public.err1")+r.data,type:"error",duration:1e3}),e.abrupt("return");case 16:return e.next=18,u.a.transactionAssemble(r.data.inputs,r.data.outputs,c,5,h);case 18:return p=e.sent,e.next=21,u.a.transactionSerialize(t,i,p);case 21:o=e.sent,e.next=97;break;case 24:if(1!==this.passwordType){e.next=42;break}return n.amount=Number(Object(l["d"])(this.outInfo.amount,1e8)),n.depositHash=this.outInfo.txHash,e.next=29,Object(d["j"])(n,this.balanceInfo,6);case 29:if(r=e.sent,!r.success){e.next=39;break}return e.next=33,u.a.transactionAssemble(r.data.inputs,r.data.outputs,c,6,this.outInfo.txHash);case 33:return f=e.sent,e.next=36,u.a.transactionSerialize(t,i,f);case 36:o=e.sent,e.next=40;break;case 39:this.$message({message:this.$t("public.err1")+r.data,type:"error",duration:1e3});case 40:e.next=97;break;case 42:if(2!==this.passwordType){e.next=96;break}return n.amount=this.nodeInfo.deposit,n.depositHash=this.$route.query.hash,e.next=47,Object(d["j"])(n,this.balanceInfo,9);case 47:if(r=e.sent,!r.success){e.next=93;break}return b=r.data.inputs,m=[],e.next=53,Object(d["a"])(this.$route.query.hash);case 53:for(g=e.sent,I=!0,x=!1,v=void 0,e.prev=57,$=g.list[Symbol.iterator]();!(I=(_=$.next()).done);I=!0)w=_.value,b.push({address:w.address,assetsChainId:this.agentAsset.agentAsset.chainId,assetsId:this.agentAsset.agentAsset.assetId,amount:w.amount,locked:-1,nonce:w.txHash.substring(w.txHash.length-16)}),m.push({address:w.address,assetsChainId:this.agentAsset.agentAsset.chainId,assetsId:this.agentAsset.agentAsset.assetId,amount:w.amount,lockTime:0});e.next=65;break;case 61:e.prev=61,e.t0=e["catch"](57),x=!0,v=e.t0;case 65:e.prev=65,e.prev=66,I||null==$.return||$.return();case 68:if(e.prev=68,!x){e.next=71;break}throw v;case 71:return e.finish(68);case 72:return e.finish(65);case 73:return y=[],k=[],m.forEach(function(e){var s;(s=y.indexOf(e.address))>-1?k[s].amount=Number(k[s].amount)+Number(e.amount):(y.push(e.address),k.push({address:e.address,amount:e.amount,assetsChainId:e.assetsChainId,assetsId:e.assetsId,lockTime:e.lockTime}))}),k.unshift(r.data.outputs[0]),k[0].lockTime=k[0].lockTime+259200,e.next=80,u.a.transactionAssemble(b,k,c,9,this.$route.query.hash);case 80:if(j=e.sent,A=Object(d["e"])(j,1),n.fee===A){e.next=88;break}return n.fee=A,k[0].amount=Number(Object(l["b"])(this.nodeInfo.deposit,A).toString()),e.next=87,u.a.transactionAssemble(b,k,c,9,this.$route.query.hash);case 87:j=e.sent;case 88:return e.next=90,u.a.transactionSerialize(t,i,j);case 90:o=e.sent,e.next=94;break;case 93:this.$message({message:this.$t("public.err1")+r.data,type:"error",duration:1e3});case 94:e.next=97;break;case 96:console.log("交易类型错误");case 97:return e.next=99,Object(d["l"])(o).then(function(e){e.success?N.$router.push({name:"txList"}):N.$message({message:N.$t("public.err")+e.data.code,type:"error",duration:1e3})}).catch(function(e){N.$message({message:N.$t("public.err0")+e,type:"error",duration:1e3})});case 99:e.next=102;break;case 101:this.$message({message:this.$t("address.address13"),type:"error",duration:1e3});case 102:case"end":return e.stop()}},e,this,[[57,61,65,73],[66,,68,72]])}));function s(s){return e.apply(this,arguments)}return s}(),getAssemble:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var s,t,a,n,r,o,i,c,h,p,f,b,m,g,I,x,v;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(s={fromAddress:this.addressInfo.address,assetsChainId:this.agentAsset.agentAsset.chainId,assetsId:this.agentAsset.agentAsset.assetId,amount:Number(Object(l["d"])(this.jionNodeForm.amount,1e8)),fee:1e5},t={},a="",n="",0!==this.passwordType){e.next=18;break}return e.next=7,Object(d["j"])(s,this.balanceInfo,5);case 7:if(t=e.sent,r={address:this.addressInfo.address,agentHash:this.$route.query.hash,deposit:Number(Object(l["d"])(this.jionNodeForm.amount,1e8))},t.success){e.next=12;break}return this.$message({message:this.$t("public.err1")+t.data,type:"error",duration:3e3}),e.abrupt("return",{success:!1});case 12:return e.next=14,u.a.transactionAssemble(t.data.inputs,t.data.outputs,a,5,r);case 14:return n=e.sent,e.abrupt("return",{success:!0,data:n});case 18:if(1!==this.passwordType){e.next=33;break}return s.amount=Number(Object(l["d"])(this.outInfo.amount,1e8)),s.depositHash=this.outInfo.txHash,e.next=23,Object(d["j"])(s,this.balanceInfo,6);case 23:if(t=e.sent,t.success){e.next=27;break}return this.$message({message:this.$t("public.err1")+t.data,type:"error",duration:3e3}),e.abrupt("return",{success:!1});case 27:return e.next=29,u.a.transactionAssemble(t.data.inputs,t.data.outputs,a,6,this.outInfo.txHash);case 29:return n=e.sent,e.abrupt("return",{success:!0,data:n});case 33:if(2!==this.passwordType){e.next=84;break}return s.amount=this.nodeInfo.deposit,s.depositHash=this.$route.query.hash,e.next=38,Object(d["j"])(s,this.balanceInfo,9);case 38:if(t=e.sent,t.success){e.next=42;break}return this.$message({message:this.$t("public.err1")+t.data,type:"error",duration:3e3}),e.abrupt("return",{success:!1});case 42:return o=t.data.inputs,i=[],e.next=46,Object(d["a"])(this.$route.query.hash);case 46:for(c=e.sent,h=!0,p=!1,f=void 0,e.prev=50,b=c.list[Symbol.iterator]();!(h=(m=b.next()).done);h=!0)g=m.value,o.push({address:g.address,assetsChainId:this.agentAsset.agentAsset.chainId,assetsId:this.agentAsset.agentAsset.assetId,amount:g.amount,locked:-1,nonce:g.txHash.substring(g.txHash.length-16)}),i.push({address:g.address,assetsChainId:this.agentAsset.agentAsset.chainId,assetsId:this.agentAsset.agentAsset.assetId,amount:g.amount,lockTime:0});e.next=58;break;case 54:e.prev=54,e.t0=e["catch"](50),p=!0,f=e.t0;case 58:e.prev=58,e.prev=59,h||null==b.return||b.return();case 61:if(e.prev=61,!p){e.next=64;break}throw f;case 64:return e.finish(61);case 65:return e.finish(58);case 66:return I=[],x=[],i.forEach(function(e){var s;(s=I.indexOf(e.address))>-1?x[s].amount=Number(x[s].amount)+Number(e.amount):(I.push(e.address),x.push({address:e.address,amount:e.amount,assetsChainId:e.assetsChainId,assetsId:e.assetsId,lockTime:e.lockTime}))}),x.unshift(t.data.outputs[0]),x[0].lockTime=x[0].lockTime+259200,e.next=73,u.a.transactionAssemble(o,x,a,9,this.$route.query.hash);case 73:if(n=e.sent,v=Object(d["e"])(n,1),s.fee===v){e.next=81;break}return s.fee=v,x[0].amount=Number(Object(l["b"])(this.nodeInfo.deposit,v).toString()),e.next=80,u.a.transactionAssemble(o,x,a,9,this.$route.query.hash);case 80:n=e.sent;case 81:return e.abrupt("return",{success:!0,data:n});case 84:console.log("交易类型错误");case 85:case"end":return e.stop()}},e,this,[[50,54,58,66],[59,,61,65]])}));function s(){return e.apply(this,arguments)}return s}(),toUrl:function(e,s){Object(l["h"])(e,s)}},watch:{addressInfo:function(e,s){e&&e.address!==s.address&&s.address&&(this.nodeDepositLoading=!0,this.jionNodeForm.amount="",this.getBalanceByAddress(this.agentAsset.agentAsset.chainId,this.agentAsset.agentAsset.assetId,this.addressInfo.address),this.getNodeDepositByHash(this.pageIndex,this.pageSize,this.addressInfo.address,this.$route.query.hash))}}},b=f,m=(t("45e9"),t("2877")),g=Object(m["a"])(b,a,n,!1,null,null,null);s["default"]=g.exports},b301:function(e,s,t){"use strict";var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"back",attrs:{backUrl:e.backUrl}},[t("span",{staticClass:"back-box",on:{click:e.back}},[t("i",{staticClass:"el-icon-arrow-left"}),t("span",[e._v(e._s(e.backTitle))])])])},n=[],r={props:{backTitle:{type:String,default:""},backUrl:{type:String,default:"1"},backParams:{type:String,default:""}},methods:{back:function(){"1"===this.backUrl?this.$router.go(-1):this.$router.push({name:this.backUrl})}}},o=r,i=(t("2e64"),t("2877")),c=Object(i["a"])(o,a,n,!1,null,null,null);s["a"]=c.exports},ff03:function(e,s,t){}}]);
//# sourceMappingURL=chunk-51b33656.901d8f95.js.map